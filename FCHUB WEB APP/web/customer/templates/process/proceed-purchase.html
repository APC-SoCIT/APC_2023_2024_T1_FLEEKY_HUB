{% extends 'customer/navbar.html' %}
{% load static %}
{% load widget_tweaks %}
{% block content %}
<style type="text/css">
    /* General Styles */
    body {
        background-color: #f8f8f8;
        font-family: 'Arial', sans-serif;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    /* Heading Styles */
    .page-title {
        font-size: 28px;
        text-align: center;
        margin: 20px 0;
    }

    /* Payment Styles */
    .payment-methods {
        display: flex;
        justify-content: center;
        margin: 20px 0;
    }

    .payment-method {
        margin: 0 10px;
    }

    /* Shipping Fee Styles */
    .shipping-fees {
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin: 20px 0;
    }

    .shipping-fee-header {
        background-color: #f0f0f0;
        padding: 10px;
        text-align: center;
    }

    .shipping-fee-list {
        list-style: none;
        padding: 0;
    }

    .shipping-fee-item {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        border-bottom: 1px solid #ddd;
    }

    /* Order Summary Styles */
    .order-summary {
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin: 20px 0;
    }

    .order-summary-header {
        background-color: #f0f0f0;
        padding: 10px;
        text-align: center;
    }

    .order-summary-table {
        width: 100%;
    }

    .order-summary-table th, .order-summary-table td {
        padding: 10px;
        border-bottom: 1px solid #ddd;
        text-align: center;
    }

    .order-summary-total {
        font-weight: bold;
    }

    /* Customer Info Styles */
    .customer-info {
        background-color: #fff;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin: 20px 0;
    }

    .customer-info-header {
        background-color: #f0f0f0;
        padding: 10px;
        text-align: center;
    }

    .customer-info-list {
        list-style: none;
        padding: 0;
    }

    .customer-info-item {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        border-bottom: 1px solid #ddd;
    }
</style>

<div class="container">
    <h1 class="page-title">Shipping Address Fee Reference</h1>
    
    <div class="payment-methods">
        <div class="payment-method">
            <h3>Price (300)</h3>
            <ul class="shipping-fee-list">
                <li class="shipping-fee-item">NCR</li>
                <li class="shipping-fee-item">Region 1</li>
                <li class="shipping-fee-item">Region 2</li>
                <li class="shipping-fee-item">Region 3</li>
                <li class="shipping-fee-item">Region 4A</li>
                <li class="shipping-fee-item">Region 5</li>
            </ul>
        </div>
        <div class="payment-method">
            <h3>Price (400)</h3>
            <ul class="shipping-fee-list">
                <li class="shipping-fee-item">Region 6</li>
                <li class="shipping-fee-item">Region 7</li>
                <li class="shipping-fee-item">Region 8</li>
            </ul>
        </div>
        <div class="payment-method">
            <h3>Price (500)</h3>
            <ul class="shipping-fee-list">
                <li class="shipping-fee-item">Region 9</li>
                <li class="shipping-fee-item">Region 10</li>
                <li class="shipping-fee-item">Region 11</li>
                <li class="shipping-fee-item">Region 12</li>
                <li class="shipping-fee-item">Region 13</li>
                <li class="shipping-fee-item">Region CAR</li>
                <li class="shipping-fee-item">Region ARMM</li>
            </ul>
        </div>
    </div>

    {% if cart_items %}
    <div class="shipping-fees">
        <div class="shipping-fee-header">
            <h2>Confirm Order</h2>
        </div>
        <table class="order-summary-table">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Image</th>
                </tr>
            </thead>
            <tbody>
                {% for order in cart_items %}
                <tr>
                    <td>{{ order.product.name }}</td>
                    <td>₱{{ order.product.price }}</td>
                    <td>{{ order.quantity }}</td>
                    <td>
                        <img src="{{ order.product.product_image.url }}" alt="{{ order.product.name }}" height="150px" width="150px">
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <h2>Billing Breakdown:</h2>
        <table class="order-summary-table">
            <thead>
                <tr>
                    <th>Product Name</th>
                    <th>Product Price</th>
                </tr>
            </thead>
            <tbody>
                {% for cart_item in cart_items %}
                <tr>
                    <td>{{ cart_item.product.name }}</td>
                    <td>(₱{{ cart_item.product.price }})</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <p>VAT: 12% | ₱{{ vat }}</p>
        <p>Shipping Fee ({{ customer_address.region }}): ₱{{ shipping_fee }}</p>
        <p class="order-summary-total">Total Price: ₱{{ total }}</p>
        <p>With VAT: ₱{{ with_vat }}0</p>
        <p class="order-summary-total">Total Price with Shipping: ₱{{ total_price }}0</p>
    </div>
    
    <div class="customer-info">
        <div class="customer-info-header">
            <h2>Shipping Address</h2>
        </div>
        <ul class="customer-info-list">
            <li class="customer-info-item">Shipping to: {{ customer_address.street }}, {{ customer_address.city }}, {{ customer_address.zipcode }}</li>
        </ul>
    </div>
    <div class="customer-info">
        <div class="customer-info-header">
            <h2>Customer Info</h2>
        </div>
        <ul class="customer-info-list">
            <li class="customer-info-item">Username: {{ request.user }}</li>
            <li class="customer-info-item">Full Name: {{ customer.first_name }} {{ customer.last_name }}</li>
            <li class="customer-info-item">Email: {{ customer.email }}</li>
            <li class="customer-info-item">Mobile: {{ customer.phone_number }}</li>
            <li class="customer-info-item">Shipping Address: {{ customer_address.street }}, {{ customer_address.barangay }}, {{ customer_address.city }}, {{ customer_address.province }} ({{ customer_address.zipcode }})</li>
            <li class="customer-info-item">Additional Address Info: {{ customer_address.detailed_address }}</li>
        </ul>
    </div>

    <div class="container bg-color-primary">
        <h2 class="order-summary-total">Total: ₱{{ total_price }}0</h2>
        <div class="text-center">
            <div class="payment-buttons">
                <a class="btn btn-success btn-primary rounded" href="COD">
                    <span class="text-center btn btn-success btn-lg">Cash On Delivery</span>
                </a>
            </div>
            <div class="payment-buttons">
                <a id="pay-online-button" class="btn btn-success btn-primary rounded" href="{% url 'customer:pay-online' %}">
                    <span class="text-center btn btn-success btn-lg">Pay Online</span>
                </a>
            </div>
        </div>
    </div>
    </div>
    {% else %}
        <h1 class="text-center" style="color: red;">First Add Product In Cart</h1>
    {% endif %}
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
{% endblock content %}
